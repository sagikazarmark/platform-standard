version: '2'

services:
    frontend:
        volumes:
            - $HOME/.npm:/var/www/.npm
    app:
        volumes:
            - $HOME/.composer/cache:/var/www/.composer/cache
        logging: &app_logging
            driver: gelf
            options:
                gelf-address: udp://$LOGSTASH_ADDRESS:12201
                tag: symfony

    app_debug:
        logging: *app_logging

    web:
        logging: &web_logging
            driver: gelf
            options:
                gelf-address: udp://$LOGSTASH_ADDRESS:12201
                tag: nginx

    web_debug:
        logging: *web_logging

    blackfire:
        environment:
            BLACKFIRE_CLIENT_ID:
            BLACKFIRE_CLIENT_TOKEN:
            BLACKFIRE_SERVER_ID:
            BLACKFIRE_SERVER_TOKEN:
